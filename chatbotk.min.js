!function(){var n,e,t;function o(){var n=document.createElement("link");n.href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap",n.rel="stylesheet",document.head.appendChild(n);var e=document.createElement("link");e.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css",e.rel="stylesheet",document.head.appendChild(e);var t=document.createElement("style");t.type="text/css",t.appendChild(document.createTextNode("\n    body {\n      font-family: 'Roboto', sans-serif;\n    }\n    .message-time {\n      display: block;\n      font-size: 12px;\n      color: #000000;\n      margin-top: 5px;\n      text-align: right;\n    }\n    /* Chat Bubble */\n    #chatbot-icon {\n      position: fixed;\n      bottom: 20px;\n      left: 20px;\n      background-color: #007bff;\n      color: white;\n      padding: 15px;\n      border-radius: 50%;\n      cursor: pointer;\n      box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);\n      font-size: 24px;\n      text-align: center;\n      transition: transform 0.3s ease;\n\t  z-index:10000;\n    }\n    /* Chatbot Window */\n    #chatbot {\n      position: fixed;\n      bottom: 0;\n      left: 20px;\n      width: 350px;\n      height: 500px;\n      border-radius: 15px;\n      border: 1px solid #ccc;\n      background-color: #fff;\n      display: flex;\n      flex-direction: column;\n      box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);\n      transform: translateY(100%);\n      transition: transform 0.4s ease-in-out;\n\t  z-index:10000;\n    }\n    #chatbot.show {\n      transform: translateY(0);\n    }\n    /* Chat Header */\n    #chat-header {\n      background-color: #007bff;\n      color: white;\n      padding: 8px;\n      text-align: center;\n      font-weight: 500;\n      border-radius: 15px 15px 0 0;\n      position: relative;\n    }\n    #close-btn {\n      position: absolute;\n      right: 15px;\n      top: 10px;\n      cursor: pointer;\n      font-size: 20px;\n    }\n    /* Chat Content */\n    #chat-content {\n      flex: 1;\n      overflow-y: auto;\n      padding: 15px;\n      background-color: #f9f9f9;\n    }\n    #chat-content::-webkit-scrollbar {\n      width: 8px;\n    }\n    #chat-content::-webkit-scrollbar-thumb {\n      background-color: #007bff;\n      border-radius: 10px;\n    }\n    .message {\n      margin-bottom: 15px;\n      display: flex;\n      align-items: flex-start;\n    }\n    .user-message {\n      text-align: right;\n      justify-content: flex-end;\n    }\n    .bot-message {\n      justify-content: flex-start;\n    }\n    .user-icon, .bot-icon {\n      width: 20px;\n      height: 20px;\n      margin-right: 10px;\n      border-radius: 50%;\n      background-color: #007bff;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      color: white;\n      font-size: 18px;\n    }\n    .bot-icon {\n      background-color: #28a745;\n    }\n    .message-content {\n      max-width: 90%;\n      padding: 10px 15px;\n      border-radius: 12px;\n      color: #000005;\n      font-size: 14px;\n      text-align: justify;\n      line-height: 1.5;\n    }\n    .user-message .message-content {\n      background-color: #007bff45;\n    }\n    .bot-message .message-content {\n      background-color: #fff;\n    }\n    /* Chat Input */\n    #chat-input {\n      display: flex;\n      padding: 15px;\n      background-color: #fff;\n      border-top: 1px solid #ccc;\n      border-radius: 0 0 15px 15px;\n    }\n    #user-message {\n      flex: 1;\n      padding: 10px;\n      border-radius: 25px;\n      border: 1px solid #ccc;\n      outline: none;\n      transition: box-shadow 0.3s ease;\n    }\n    #user-message:focus {\n      box-shadow: 0 0 10px rgba(0, 123, 255, 0.5);\n    }\n    #send-btn {\n      background-color: transparent;\n      border: none;\n      color: #007bff;\n      cursor: pointer;\n      font-size: 24px;\n      margin-left: 10px;\n    }\n    /* Loading Animation */\n    #loading-animation {\n      display: none;\n      text-align: center;\n      padding: 15px;\n    }\n    .dot-flashing {\n      position: relative;\n      width: 10px;\n      height: 10px;\n      border-radius: 5px;\n      background-color: #28a745;\n      color: #28a745;\n      animation: dotFlashing 1s infinite linear alternate;\n    }\n    @keyframes dotFlashing {\n      0% {\n        background-color: #28a745;\n      }\n      50%, 100% {\n        background-color: #e0e0e0;\n      }\n    }\n    /* Mobile Responsiveness */\n    @media (max-width: 600px) {\n      #chatbot {\n        width: 95%;\n        left: 2.5%;\n      }\n    }\n    /* Language Selection Buttons */\n    .language-container {\n      display: flex;\n      justify-content: center;\n      \n    }\n    .language-btn {\n      background-color: #007bff;\n      color: white;\n      border: none;\n      /*padding: 10px 20px;*/\n      margin: 5px;\n      cursor: pointer;\n      border-radius: 5px;\n      font-size: 14px;\n      transition: background-color 0.3s;\n    }\n    .language-btn.active {\n      background-color: #28a745;\n    }\n    .language-btn:hover {\n      background-color: #0056b3;\n    }\n    #voice-btn, #send-btn {\n      background-color: transparent;\n      border: none;\n      color: #007bff;\n      cursor: pointer;\n      font-size: 24px;\n      margin-left: 10px;\n    }\n    /* Voice Capture Animation */\n    #voice-btn.capturing {\n      color: red;\n      animation: glow 1s ease-in-out infinite alternate;\n    }\n    @keyframes glow {\n      0% {\n        box-shadow: 0 0 5px red;\n      }\n      100% {\n        box-shadow: 0 0 20px red;\n      }\n    }\n    ")),document.head.appendChild(t);var o=document.createElement("div");o.innerHTML='\n    <div id="chatbot-icon" style="display: none;">\n      üí¨\n    </div>\n    <div id="chatbot" style="display: none;">\n      <div id="chat-header">\n        Karmyogi Bot\n        <span id="close-btn">&times;</span>\n\t\t<span id="resize-btn" title="Resize Chatbot" style="position: absolute; right: 50px; top: 10px; cursor: pointer; font-size: 20px;">&#x26F6;</span>\n      </div>\n      <div id="chat-content">\n        <div id="messages">\n          <div class="message bot-message">\n            <div class="bot-icon"><i class="fas fa-robot"></i></div>\n            <div class="message-content">Hello! I\'m Karmyogi Bot. How can I assist you today?</div>\n          </div>\n        </div>\n        <div id="loading-animation">\n          <div class="dot-flashing"></div>\n        </div>\n      </div>\n      \x3c!-- Language selection with better UI --\x3e\n      <div id="language-selection" class="language-container">\n        <button id="language-english" class="language-btn active">English</button>\n        <button id="language-gujarati" class="language-btn">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</button>\n      </div>\n      <div id="chat-input">\n        <input type="text" id="user-message" placeholder="Type your message or use voice...">\n        <button id="voice-btn"><i class="fas fa-microphone"></i></button>\n        <button id="send-btn"><i class="fas fa-paper-plane"></i></button>\n      </div>\n\t  \x3c!-- Disclaimer Section --\x3e\n  <div id="chat-disclaimer" style="background-color: #f9f9f9; text-align: center; font-size: 9px; border-top: 1px solid #ccc;">\n    <p><strong>Disclaimer:</strong> This is a test version of the chatbot. Responses may not be fully accurate or representative of final functionality.</p>\n  </div>\n    </div>\n    ',document.body.appendChild(o),$(document).ready((function(){function n(){const n=new Date;let e=n.getHours(),t=n.getMinutes();const o=e>=12?"PM":"AM";return e%=12,e=e||12,t=t<10?"0"+t:t,e+":"+t+" "+o}var e,t=!1;$("#resize-btn").click((function(){t?($("#chatbot").css({width:"350px",height:"500px"}),$("#resize-btn").html("&#x26F6;"),t=!1):($("#chatbot").css({width:"90%",height:"90%"}),$("#resize-btn").html("&#x2715;"),t=!0)}));var o=!1;"webkitSpeechRecognition"in window?((e=new webkitSpeechRecognition).continuous=!1,e.interimResults=!1,e.lang="en-US",e.onresult=function(n){var e=n.results[0][0].transcript;$("#user-message").val(e),o=!1,$("#voice-btn").removeClass("capturing")},e.onstart=function(){$("#voice-btn").addClass("capturing")},e.onerror=function(n){console.error("Speech recognition error detected: "+n.error),o=!1,$("#voice-btn").removeClass("capturing")},e.onend=function(){o=!1,$("#voice-btn").removeClass("capturing")}):alert("Sorry, your browser doesn't support voice recognition."),$("#voice-btn").click((function(){o?(e.stop(),o=!1):(e.start(),o=!0)})),$("#language-english").click((function(){e.lang="en-US",$(".language-btn").removeClass("active"),$(this).addClass("active")})),$("#language-gujarati").click((function(){e.lang="gu-IN",$(".language-btn").removeClass("active"),$(this).addClass("active")}));let a="session-"+Math.floor(1e6*Math.random());$("#chatbot-icon").fadeIn(),$("#chatbot-icon").click((function(){$("#chatbot").addClass("show").fadeIn(),$("#chatbot-icon").fadeOut()})),$("#close-btn").click((function(){$("#chatbot").removeClass("show").fadeOut(),$("#chatbot-icon").fadeIn()})),$("#send-btn").click((function(){let e=$("#user-message").val();if(""!==e.trim()){const t=n();$("#messages").append('<div class="message user-message"><div class="user-icon"><i class="fas fa-user"></i></div><div class="message-content"><p>'+e+'</p><span class="message-time">'+t+"</span></div></div>"),$("#user-message").prop("disabled",!0),$("#send-btn").prop("disabled",!0),$("#user-message").val(""),$("#loading-animation").show(),$("#chat-content").scrollTop($("#chat-content")[0].scrollHeight),$.ajax({url:"https://staging-chatbot.gujarat.gov.in/api/v1/workspace/karmayogi/chat",type:"POST",headers:{Authorization:"Bearer ZA2NYAS-BNVM8A4-Q55P8XC-WPG9FFT","Content-Type":"application/json"},data:JSON.stringify({message:e,mode:"chat",sessionId:a}),success:function(e){setTimeout((function(){const t=e.textResponse,o=n();$("#messages").append('<div class="message bot-message"><div class="bot-icon"><i class="fas fa-robot"></i></div><div class="message-content"><p>'+function(n){return(n=(n=(n=(n=(n=(n=(n=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>")).replace(/\*(.*?)\*/g,"<i>$1</i>")).replace(/`(.*?)`/g,"<code>$1</code>")).replace(/\n/g,"<br>")).replace(/(?:^|\n)- (.*?)(?=\n|$)/g,"<ul><li>$1</li></ul>")).replace(/<\/ul>\s*<ul>/g,"")).replace(/\b(\d{4}[-\/\.]\d{2}[-\/\.]\d{2}|\d{2}[-\/\.]\d{2}[-\/\.]\d{4})\b/g,"<b>$1</b>")).replace(/\b(\d{1,2}:\d{2}(?::\d{2})?(?:\s?[APap][Mm])?)\b/g,"<b>$1</b>")}(t)+'</p><span class="message-time">'+o+"</span></div></div>"),$("#chat-content").scrollTop($("#chat-content")[0].scrollHeight)}),1e3),$("#user-message").prop("disabled",!1),$("#send-btn").prop("disabled",!1),$("#user-message").focus(),$("#loading-animation").hide()},error:function(){$("#messages").append('<div class="message bot-message"><div class="bot-icon"><i class="fas fa-robot"></i></div><div class="message-content">Error occurred while sending the message.</div></div>'),$("#loading-animation").hide(),$("#user-message").prop("disabled",!1),$("#send-btn").prop("disabled",!1)}})}})),$("#user-message").keypress((function(n){13==n.which&&$("#send-btn").click()}))}))}"undefined"==typeof jQuery?(n="https://code.jquery.com/jquery-3.6.0.min.js",e=o,(t=document.createElement("script")).type="text/javascript",t.readyState?t.onreadystatechange=function(){"loaded"!=t.readyState&&"complete"!=t.readyState||(t.onreadystatechange=null,e())}:t.onload=function(){e()},t.src=n,document.getElementsByTagName("head")[0].appendChild(t)):o()}();